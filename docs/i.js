new AudioContext;const t={t:'"Courier New", monospace',i:"Arial, sans-serif",h:'"Times New Roman", serif',o:60,u:"js13k 2025: Black Cat",l:!0,get w(){return Math.round(t.p.m.width/t.p.scale)},get T(){return Math.round(t.p.m.height/t.p.scale)},init(){t.M.init(),t.p.init(),t.p.level=new t.P,t.p._()},v:(t,i,s)=>t*(1-s)+i*s,I(){const t=localStorage.getItem("2025_sd.save");return t?JSON.parse(t):null},S(t){localStorage.setItem("2025_sd.save",JSON.stringify({level:t}))}};window.addEventListener("load",()=>t.init()),t.p={m:null,A:null,level:null,cursor:[-1,-1],k:!1,C:0,O:0,L:[0,0],offset:[0,0],scale:1,F:0,D:0,clear(){this.A.setTransform(1,0,0,1,0,0),this.A.clearRect(0,0,this.m.width,this.m.height)},draw(){this.clear(),this.A.setTransform(this.scale,0,0,this.scale,this.F,this.D),this.level?.draw(this.A)},N(){this.A.setTransform(this.scale,0,0,this.scale,0,0),this.A.fillStyle="#0006",this.A.fillRect(0,0,this.m.width/this.scale,this.m.height/this.scale),this.A.fillStyle="#fff",this.A.font="600 56px "+t.i,this.A.textAlign="center",this.A.textBaseline="top",this.A.fillText("PAWSED",this.L.x,this.L.y-56)},R(i,s){const h=document.createElement("canvas");h.width=i,h.height=s;const e=h.getContext("2d",{alpha:!0});return e.imageSmoothingEnabled=t.l,[h,e]},B(){return[this.cursor[0]/this.scale,this.cursor[1]/this.scale]},init(){[this.m,this.A]=this.R(),document.body.append(this.m),this.G(),this.resize()},_(i=0){if(i&&this.C){const s=(i-this.C)/(1e3/t.o);if(this.A.imageSmoothingEnabled=t.l,this.k)return void this.N();this.O+=s,this.level.update(s),this.draw(),this.A.fillStyle="#fff",this.A.font="600 12px "+t.t,this.A.textAlign="left",this.A.fillText(String(Math.round(t.o/s)).padStart(3,"0")+" FPS, "+this.scale.toFixed(5),10,20)}this.C=i,requestAnimationFrame(t=>this._(t))},pause(){this.k=!0},K(i,s,h=10){if(t.l)return;const e=i.width/h,n=i.height/h,[o,r]=this.R(e,n);r.clearRect(0,0,e,n),r.drawImage(i,0,0,e,n),s.clearRect(0,0,i.width,i.height),s.drawImage(o,0,0,i.width,i.height)},G(){window.addEventListener("resize",t=>this.resize()),this.resize(),t.M.H("Escape",()=>this.W()),this.m.addEventListener("mouseleave",t=>{this.cursor[0]=-1}),this.m.addEventListener("mousemove",t=>{this.cursor[0]=t.clientX-this.offset[0],this.cursor[1]=t.clientY-this.offset[1],this.level?.J(this.B())}),this.m.addEventListener("click",t=>{this.cursor[0]=t.clientX-this.offset[0],this.cursor[1]=t.clientY-this.offset[1],this.level?.U(this.B())})},resize(){const t=1920/1080;let i=window.innerHeight,s=Math.round(i*t);s>window.innerWidth&&(s=window.innerWidth,i=s/t),this.scale=i/1080,this.L.x=s/2/this.scale,this.L.y=i/2/this.scale,this.offset[0]=(window.innerWidth-s)/2,this.offset[1]=(window.innerHeight-i)/2,this.m.width=s,this.m.height=i,this.k&&(clearTimeout(this.X),this.X=setTimeout(()=>this.N(),100))},W(){this.k?this.unpause():this.pause()},unpause(){this.k&&(this.k=!1,this._())}},t.Audio={context:new AudioContext,async play(t,i){const s=await this.context.decodeAudioData(t.slice()),h=this.context.createGain();h.connect(this.context.destination),h.gain.value=i?.volume||.5;const e=this.context.createBufferSource();e.buffer=s,e.connect(h),e.loop=!1,e.start()},j:new Uint8Array([255,243,132,196,0,0,0,0,0,0,0,0,0,88,105,110,103,0,0,0,15,0,0,0,26,0,0,3,192,0,8,8,8,16,16,16,16,32,32,32,32,40,40,40,40,56,56,56,56,72,72,72,72,80,80,80,96,96,96,96,104,104,104,104,120,120,120,120,136,136,136,136,144,144,144,144,152,152,152,160,160,160,160,168,168,168,168,176,176,176,176,184,184,184,184,192,192,192,192,200,200,200,200,208,208,208,216,216,216,216,224,224,224,224,232,232,232,232,240,240,240,240,248,248,248,248,255,255,255,0,0,0,57,76,65,77,69,51,46,49,48,48,2,30,0,0,0,0,0,0,0,0,20,8,36,3,200,34,0,0,8,0,0,3,192,229,212,162,251,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,243,20,196,0,2,128,6,80,0,0,132,0,88,62,250,4,255,229,63,63,254,32,201,255,243,20,196,1,2,168,190,152,0,0,68,160,7,22,70,255,255,169,133,167,252,186,111,255,243,36,196,1,6,49,30,160,40,3,206,193,7,200,74,210,255,55,255,246,83,197,64,32,35,27,9,13,255,253,88,108,53,27,158,94,56,0,48,81,127,252,249,205,216,193,49,255,243,20,196,11,5,96,202,188,0,1,88,200,48,63,16,203,108,245,12,1,144,104,202,255,243,36,196,0,6,57,6,180,0,1,218,177,231,158,32,5,234,233,255,247,112,120,36,3,192,128,64,0,176,36,83,255,234,156,70,254,55,96,64,36,3,132,153,127,144,210,127,255,243,36,196,10,6,73,14,216,120,0,76,173,245,66,87,155,9,175,255,255,133,230,230,214,145,193,185,42,106,210,37,3,182,73,5,156,241,185,46,114,155,86,95,175,52,51,255,255,243,20,196,19,6,80,206,208,120,3,78,167,240,200,193,142,38,185,170,12,82,128,100,255,243,36,196,4,6,8,210,180,88,3,94,206,241,74,153,53,15,255,208,122,81,132,232,127,190,62,29,5,187,158,33,10,213,12,67,224,98,168,63,101,109,255,245,59,50,73,7,255,243,20,196,14,6,17,34,164,88,3,68,209,65,58,127,164,253,31,138,28,88,118,213,255,243,36,196,0,6,25,34,180,88,3,78,195,28,194,128,86,62,129,206,112,93,191,254,170,62,97,200,4,136,127,111,111,83,134,195,97,74,8,143,12,59,224,186,140,214,70,154,255,243,36,196,10,5,216,210,144,80,4,222,204,127,254,203,69,42,5,50,39,28,176,38,77,242,85,38,29,195,214,182,255,255,240,80,70,196,144,79,95,255,255,128,53,42,168,58,255,243,20,196,21,2,128,206,168,32,3,88,204,20,191,255,255,145,125,85,12,102,7,138,255,243,20,196,22,2,8,206,176,0,1,210,204,127,255,250,145,136,200,149,136,128,5,255,255,243,20,196,24,2,8,206,176,0,3,86,204,255,245,97,18,136,2,183,255,255,226,234,255,243,20,196,26,2,144,202,176,32,2,146,204,12,33,66,255,255,255,168,138,68,51,224,255,243,20,196,26,1,248,202,192,0,1,76,204,102,253,127,255,241,172,33,127,255,254,153,255,243,20,196,29,1,144,198,200,0,1,68,192,60,253,6,134,244,2,40,47,235,255,254,255,243,20,196,33,1,224,198,196,40,1,68,192,161,24,183,255,179,47,175,84,66,42,70,255,243,20,196,36,3,233,38,148,0,4,26,192,96,224,45,255,203,152,255,213,8,197,191,255,243,20,196,31,4,137,38,220,120,1,198,214,255,254,64,226,85,71,14,36,239,252,87,255,243,20,196,23,2,56,102,200,48,0,12,20,254,177,85,216,66,191,253,110,79,223,44,255,243,20,196,25,1,208,190,180,0,1,196,192,40,255,43,135,127,239,254,68,147,4,85,255,243,20,196,28,2,32,94,184,8,0,4,18,22,255,226,194,226,191,138,138,11,126,42,255,243,20,196,30,2,56,94,148,0,0,68,160,76,65,77,69,51,46,49,48,48,170,170,255,243,20,196,32,2,88,2,140,0,0,0,0,170,170,170,170,170,170,170,170,170,170,170,255,243,20,196,33,2,184,1,204,0,8,0,0,170,170,170,170,170,170,170,170,170,170,170])},t.M={Y:{},q:{},V:{},init(){document.body.onkeydown=t=>{const i=this.V[t.code];i&&i.Z||(this.V[t.code]={time:Date.now()},this.Y[t.code]&&this.Y[t.code].forEach(t=>t()))},document.body.onkeyup=t=>{this.V[t.code]={time:0},this.q[t.code]&&this.q[t.code].forEach(t=>t())}},$(t,i){for(const s of t)if(this.tt(s,i))return!0;return!1},tt(t,i){const s=this.V[t];return!(!s||!s.time)&&(i&&(s.time=0,s.Z=!0),!0)},it(t,i){const s=this.Y[t]||[];s.push(i),this.Y[t]=s},H(t,i){const s=this.q[t]||[];s.push(i),this.q[t]=s}},t.st=class{constructor(t,i=0){this.level=t,this.set(i)}ht(){return this.level.O>this.timeEnd}et(){return Math.min(1,1-(this.timeEnd-this.level.O)/this.duration)}set(i){this.duration=i*t.o,this.timeEnd=this.level.O+this.duration}},t.nt=class{ot=!0;constructor(i,s,h){this.level=i,this.w=s,this.T=h,[this.m,this.A]=t.p.R(s,h)}rt(){return(t.w-this.w)/2}draw(t){}update(t){}},t.Animation=class{constructor(i,s,h){this.O=new t.st(t.p.level,i),this.ct=s,this.dt=h}ut(){this.O&&(this.O.ht()?(this.dt(),this.O=null):this.ct(this.O.et()))}},t.lt=class{static ft=1;static wt=2;static gt=3;constructor(t,i,s){this.id=t,this.x=i,this.y=s,this.w=100,this.T=100}draw(i){this.m||([this.m,this.A]=t.p.R(this.w,this.T),this.A.fillStyle="#689cce",this.A.fillRect(0,0,this.w,this.T)),this.id==t.lt.ft?(this.x=t.w-200,this.y=(t.T-100)/2):this.id==t.lt.wt?(this.x=(t.w-100)/2,this.y=t.T/2+200):this.id==t.lt.gt&&(this.x=t.w/2+200,this.y=(t.T-100)/2),i.drawImage(this.m,this.x,this.y)}},t.P=class{constructor(){this.O=0,this.Tt=1,this.Mt=0,this.Pt=[],this.yt=[],this._t=null,this.vt=[],this.Et=new t.lt(t.lt.ft),this.It=new t.lt(t.lt.wt),this.St=new t.lt(t.lt.gt),this.At=new t.kt(this),this.Ct=new t.Ot(this),this.xt=new t.Lt(this)}Ft(t){this.Et.draw(t),this.It.draw(t),this.St.draw(t)}bt(i){const s=(t.T-840)/2;for(let t=0;t<this.vt.length;t++){const h=this.vt[t];h.draw(),h.x=60,h.y=s+120*t,h.w=100,h.T=100,i.drawImage(h.m,h.x,h.y,h.w,h.T)}}Dt(i){if(!this._t)return;const s=(t.w-350)/2,h=this._t.Nt;i.fillStyle="#fff",i.fillRect(s,20,350,120),h.draw(),i.drawImage(h.m,s+10,30),i.fillStyle="#000",i.textAlign="left",i.font="600 16px "+t.i,i.fillText(h.name.toUpperCase(),s+120,40),i.fillText("Ingredients: "+h.vt.length,s+120,70)}Rt(i){i.fillStyle="#ff0",i.textAlign="right",i.textBaseline="top",i.font="600 48px "+t.i,i.fillText(this.Tt,t.w-50,40)}Bt(i){const s=[],h=[1,2,3][i]||3;for(const i in t.zt){const e=t.zt[i];e.vt.length<=h&&s.push(e)}return[{Nt:t.Gt,Kt:10}]}Ht(t){this.xt.Wt(t)}Jt(i){this.Mt=i,this.vt=[],i>=1&&this.vt.push(t.Ut,t.Xt,t.jt),i>=2&&this.vt.push(t.Yt),i>=3&&this.vt.push(t.qt),this.Pt=this.Bt(i)}draw(i){if(this.At.draw(i),this.xt.draw(i),this.Ct.draw(i),this.Rt(i),this.Dt(i),this.bt(i),this.Ft(i),0==this.Mt){i.fillStyle="#0000004f",i.fillRect(0,0,t.w,t.T);const s=600,h=200,e=(t.w-s)/2;i.fillStyle="#fff",i.fillRect(e,200,s,h),i.fillStyle="#000",i.textAlign="left",i.font="500 16px "+t.i,i.textBaseline="top",i.fillText("Welcome to the opening of Black Cat Potions!",e+10,210),i.fillText("Do not let your score drop below 1 or you can already close your business again.",e+10,226),i.fillText("You get the ingredients, but unfortunately no recipe book. Eh, you will figure it out.",e+10,242)}}Qt(i){const s=i.length;if(0==s)return t.zt.Vt;for(const h in t.zt){const e=t.zt[h];if(e.vt.length!=s)continue;let n=0;for(const t of e.vt)i.includes(t)&&n++;if(n==s)return e}return null}Zt(t,i){return t[0]>=i.x&&t[0]<=i.x+i.w&&t[1]>=i.y&&t[1]<=i.y+i.T}U(t){if(!this.$t)if(0!=this.Mt)if(this.Zt(t,this.Et))this.ti();else if(this.Zt(t,this.It))this.xt.ii([]);else{if(this.Zt(t,this.St))return this.$t=!0,void this.si(()=>this.$t=!1);for(let i=0;i<this.vt.length;i++){const s=this.vt[i];if(this.Zt(t,s))return void this.Ht(s)}}else this.Jt(1)}J(t){if(0!=this.Mt&&!this.Zt(t,this.Et)&&!this.Zt(t,this.It)&&!this.Zt(t,this.St))for(let i=0;i<this.vt.length;i++){const s=this.vt[i];if(this.Zt(t,s))return}}hi(t){if(!t)return-1;if(this._t.Nt==t)return 1;return(this._t.Nt.ei||[]).includes(t)?0:-1}si(i){this.At.state=t.kt.ni,this.Ct.oi(()=>{this.At.ri(this.xt.ai,i)})}update(t){this.O+=t,3==this.yt.length?this.Jt(2):8==this.yt.length&&this.Jt(3),this.Tt,this.At.update(this.O),this.xt.update(this.O),this.Ct.update(this.O)}ti(){const t=this.Qt(this.xt.ai),i=this.hi(t);this.Tt+=i,this._t.Tt=i,this.yt.push(this._t),0==this.Pt.length&&(this.Pt=this.Bt(this.Mt)),this._t=this.Pt.splice(0,1)[0]}},t.kt=class extends t.nt{static ci=1;static ni=2;constructor(i){super(i,800,800),this.offsetY=0,this.state=t.kt.ci,this.m,this.A}di(t){return(this.w-t)/2}ui(t){let i=260,s=this.di(t)-20;this.A.fillStyle="#000",this.A.beginPath(),this.A.moveTo(s,i),this.A.lineTo(s,160),this.A.lineTo(s+80,i),this.A.closePath(),this.A.fill(),this.A.beginPath(),this.A.moveTo(this.w-s,i),this.A.lineTo(this.w-s-80,i),this.A.lineTo(this.w-s,160),this.A.closePath(),this.A.fill()}li(t){let i=this.di(t);const s=t/2;let h=410;this.A.strokeStyle="#000",this.A.lineWidth=6,this.A.beginPath(),this.A.moveTo(i,h),this.A.lineTo(i-100,400),this.A.moveTo(i,420),this.A.lineTo(i-100,420),this.A.moveTo(i,430),this.A.lineTo(i-100,440),this.A.moveTo(this.w-i,h),this.A.lineTo(this.w-i+100,400),this.A.moveTo(this.w-i,420),this.A.lineTo(this.w-i+100,420),this.A.moveTo(this.w-i,430),this.A.lineTo(this.w-i+100,440),this.A.stroke();this.A.strokeStyle="#fff",this.A.lineWidth=4,this.A.beginPath(),this.A.ellipse(i+s-22,440,22,16,0,0,.9*Math.PI),this.A.stroke(),this.A.beginPath(),this.A.ellipse(i+s+22,440,22,16,0,.1*Math.PI,Math.PI),this.A.stroke();let e=380,n=40,o=30;this.A.fillStyle="#ff0",this.A.beginPath(),this.A.ellipse(i+.15*t,e,n,o,0,0,2*Math.PI),this.A.ellipse(i+.85*t,e,n,o,0,0,2*Math.PI),this.A.fill(),n=35,o=25,this.A.fillStyle="#000",this.A.beginPath(),this.A.ellipse(i+.16*t,390,n,o,0,0,2*Math.PI),this.A.ellipse(i+.84*t,390,n,o,0,0,2*Math.PI),this.A.fill()}fi(){let t=220;this.A.fillStyle="#6a267a",this.A.beginPath(),this.A.moveTo(0,320),this.A.lineTo(150,t),this.A.lineTo(250,t),this.A.lineTo(320,20),this.A.lineTo(this.w-100,70),this.A.lineTo(this.w-300,120),this.A.lineTo(this.w-250,t),this.A.lineTo(this.w-150,t),this.A.lineTo(this.w,320),this.A.closePath(),this.A.fill(),this.A.fillStyle="#54245f",this.A.beginPath(),this.A.moveTo(240,250),this.A.lineTo(256,190),this.A.lineTo(this.w-260,190),this.A.lineTo(this.w-240,250),this.A.closePath(),this.A.fill()}draw(i){if(this.ot){const t=.4*this.w;this.A.fillStyle="#000",this.A.fillRect(this.di(t),250,t,this.T-250),this.li(t),this.fi(),this.ui(t)}i.drawImage(this.m,this.rt(),t.T-this.level.xt.T-this.T/2+this.offsetY)}ri(i,s){this.animation=new t.Animation(1.5,t=>{},()=>{this.animation=null,this.state=t.kt.ci,s()})}update(i){this.state==t.kt.ci&&(i*=.05,this.offsetY=4*Math.sin(i)),this.animation?.ut()}},t.Ot=class extends t.nt{static ci=1;static wi=2;constructor(i){super(i,800,600),this.state=t.Ot.ci,this.m,this.A}mi(){this.A.fillStyle="#000",this.A.beginPath(),this.A.ellipse(240,120,40,48,0,0,2*Math.PI),this.A.ellipse(this.w-240,120,40,48,0,0,2*Math.PI),this.A.fill()}draw(i){this.ot&&this.mi(),i.drawImage(this.m,this.rt(),t.T-this.level.xt.T)}oi(i){this.animation=new t.Animation(1,t=>{},()=>{this.animation=null,i()})}update(t){this.animation?.ut()}},t.Lt=class extends t.nt{constructor(t){super(t,800,650),this.m,this.A,this.gi="#2d7feb",this.ai=[]}pi(t,i){i+=.08*this.T,this.ai.length>0?this.gi="#074":this.gi="#2d7feb",this.A.fillStyle=this.gi,this.A.beginPath(),this.A.ellipse(t,i,.36*this.w,.14*this.T,0,0,2*Math.PI),this.A.fill()}Wt(t){this.ai.push(t),this.ot=!0}draw(i){if(this.ot){this.ot=!1;let i=this.w/2,s=.2*this.T+2,h=[0,0,2*Math.PI];const e=this.A.createRadialGradient(i,s+.37*this.T,.14*this.T,i,s+.37*this.T,.82*this.T);e.addColorStop(0,"#777"),e.addColorStop(1,"#555"),this.A.strokeStyle="#555",this.A.lineWidth=4,this.A.fillStyle=e,this.A.beginPath(),this.A.ellipse(i,s+.33*this.T,.5*this.w,.47*this.T,...h),this.A.fill(),this.A.beginPath(),this.A.ellipse(i,s,.45*this.w,.2*this.T,...h),this.A.fill(),this.A.stroke(),this.A.fillStyle="#555",this.A.beginPath(),this.A.ellipse(i,s-.01*this.T,.39*this.w,.15*this.T,...h),this.A.fill(),this.A.save(),this.A.clip(),this.pi(i,s),this.A.restore(),t.p.K(this.m,this.A)}i.drawImage(this.m,this.rt(),t.T-this.T+100)}ii(t){this.ai=t,this.ot=!0}},t.Ut={name:"Lizard Tail",draw:function(){this.m||([this.m,this.A]=t.p.R(100,100),this.A.fillStyle="#c47816",this.A.fillRect(0,0,100,100))}},t.Xt={name:"Blue Peach",draw:function(){this.m||([this.m,this.A]=t.p.R(100,100),this.A.fillStyle="#3c73c5",this.A.fillRect(0,0,100,100))}},t.jt={name:"Forest Herbs",draw:function(){this.m||([this.m,this.A]=t.p.R(100,100),this.A.fillStyle="#305e25",this.A.fillRect(0,0,100,100))}},t.Yt={name:"Mind Mushroom",draw:function(){this.m||([this.m,this.A]=t.p.R(100,100),this.A.fillStyle="#8143a5",this.A.fillRect(0,0,100,100))}},t.qt={name:"Mockingbird Feather",draw:function(){this.m||([this.m,this.A]=t.p.R(100,100),this.A.fillStyle="#e4d944",this.A.fillRect(0,0,100,100))}},t.zt={Vt:{name:"Just water",vt:[],Ti:["Just a water, please.","I'm thirsty."],draw:function(){this.m||([this.m,this.A]=t.p.R(100,100),this.A.fillStyle="#00f",this.A.fillRect(0,0,100,100))}},Mi:{name:"Warming Potion",vt:[t.Ut],Ti:["The wind is so cold. I need something to warm me up."],draw:function(){this.m||([this.m,this.A]=t.p.R(100,100),this.A.fillStyle="#00f",this.A.fillRect(0,0,100,100))}},Pi:{name:"Cooling Potion",vt:[t.Xt],Ti:["I am close to a heatstroke!"],draw:function(){this.m||([this.m,this.A]=t.p.R(100,100),this.A.fillStyle="#00f",this.A.fillRect(0,0,100,100))}},yi:{name:"Health Drink",vt:[t.jt],Ti:["Ugh, I feel sick..."],draw:function(){this.m||([this.m,this.A]=t.p.R(100,100),this.A.fillStyle="#00f",this.A.fillRect(0,0,100,100))}},_i:{name:"Calming Potion",vt:[t.Xt,t.Yt],Ti:["I need something to calm me down."],draw:function(){this.m||([this.m,this.A]=t.p.R(100,100),this.A.fillStyle="#00f",this.A.fillRect(0,0,100,100))}},Ei:{name:"Refreshing Energizer",vt:[t.Xt,t.jt],Ti:["I just finished my workout. Got some energizer?"],draw:function(){this.m||([this.m,this.A]=t.p.R(100,100),this.A.fillStyle="#00f",this.A.fillRect(0,0,100,100))}},Ii:{name:"Meditative Potion",vt:[t.jt,t.Yt],Ti:["I'm losing my connection to myself. Like I'm watching myself from behind."],draw:function(){this.m||([this.m,this.A]=t.p.R(100,100),this.A.fillStyle="#00f",this.A.fillRect(0,0,100,100))}},Si:{name:"Tee-and-a-Blanket Potion",vt:[t.Yt,t.Ut],Ti:["I had a really bad day..."],ei:[t.Ii],draw:function(){this.m||([this.m,this.A]=t.p.R(100,100),this.A.fillStyle="#00f",this.A.fillRect(0,0,100,100))}},Ai:{name:"Love Potion",vt:[t.jt,t.Yt],Ti:["Do you have a Love Potion?"],draw:function(){this.m||([this.m,this.A]=t.p.R(100,100),this.A.fillStyle="#00f",this.A.fillRect(0,0,100,100))}},ki:{name:"Amplitude Potion",vt:[t.Xt,t.Ut,t.Yt],Ti:["My emotions feel so... flat. I want to try how *more* feels like."],draw:function(){this.m||([this.m,this.A]=t.p.R(100,100),this.A.fillStyle="#00f",this.A.fillRect(0,0,100,100))}}};